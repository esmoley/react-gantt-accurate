import { expect, test } from 'vitest'
import { calcDayCompletion } from '../../src/util/ganttUtils'

test('day completion', () => {
  let dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 00:00:00')))
  expect(dayCompl).toBe(0)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 12:00:00')))
  expect(dayCompl).toBe(0.5)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 18:00:00')))
  expect(dayCompl).toBe(0.75)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 19:00:00')))
  expect(dayCompl).toBe(0.7916666666666666)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 01:00:00')))
  expect(dayCompl).closeTo(0.04166666666666666, 0.000000000000000007)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 00:01:00')))
  expect(dayCompl).toBe(0.0006944444444444445)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 00:00:01')))
  expect(dayCompl).toBe(0.000011574074074074073)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 00:00:00.500')))
  expect(dayCompl).toBe(0.000005787037037037037)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 00:00:00.250')))
  expect(dayCompl).toBe(0.0000028935185185185184)
  dayCompl = calcDayCompletion(new Date(Date.parse('01 Jan 1970 00:00:00.001')))
  expect(dayCompl).toBe(1.1574074074074074e-8)
})
